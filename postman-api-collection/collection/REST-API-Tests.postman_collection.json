{
  "info": {
    "name": "REST API Tests (GoREST)",
    "description": "55 API tests aligned with java-rest-api-automation. Uses GoREST API.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "qa-automation"
  },
  "variable": [
    { "key": "base_url", "value": "https://gorest.co.in/public/v2", "type": "string" },
    { "key": "user_id", "value": "1", "type": "string" }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Valid Token Returns 200/201",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" },
              { "key": "Accept", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Auth Test User\",\"email\":\"auth-test-{{$timestamp}}@example.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users",
            "description": "POST /users requires auth on GoREST - validates token"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-AUTH-002: Status is 200 or 201', function () {",
                  "    pm.expect([200, 201]).to.include(pm.response.code);",
                  "});",
                  "pm.test('Response has body', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('object');",
                  "    if (pm.response.code === 201) pm.expect(json).to.have.property('id');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "No Token Returns 401",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Accept", "value": "application/json", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Test\",\"email\":\"test@example.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users",
            "description": "No Authorization header - expects 401"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-AUTH-001: Status is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Invalid Token Returns 401",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer invalid_token_12345", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" },
              { "key": "Accept", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Test\",\"email\":\"invalid-token@example.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users",
            "description": "POST /users requires auth - invalid token must return 401"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-AUTH-001b: Status is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Expired Token Returns 401",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{expired_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" },
              { "key": "Accept", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Test\",\"email\":\"expired-test@example.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users",
            "description": "Set expired_token in env if available. Skip if N/A (GoREST does not provide easy way to get expired token)."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-AUTH-004: Status is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "GET-List",
      "item": [
        {
          "name": "Get List Returns 200",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-LIST-001: Status is 200', function () { pm.response.to.have.status(200); });",
                  "if (pm.response.code === 200) { const json = pm.response.json(); if (json.length > 0) pm.collectionVariables.set('user_id', json[0].id); }"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get List Returns Valid JSON Array",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-LIST-002: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response is JSON array', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get List Valid Pagination",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": { "raw": "{{base_url}}/users?page=1&per_page=10", "host": ["{{base_url}}"], "path": ["users"], "query": [{ "key": "page", "value": "1" }, { "key": "per_page", "value": "10" }] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-LIST-003: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Max 10 items returned', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "    pm.expect(json.length).to.be.at.most(10);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get List Invalid Pagination",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": { "raw": "{{base_url}}/users?page=-1", "host": ["{{base_url}}"], "path": ["users"], "query": [{ "key": "page", "value": "-1" }] },
            "description": "GoREST may return 200 (ignores invalid params). Accept 400/422 when API validates."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-LIST-004: Status is 400, 422 or 200', function () {",
                  "    pm.expect([400, 422, 200]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get List When Empty",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": { "raw": "{{base_url}}/users?page=99999&per_page=10", "host": ["{{base_url}}"], "path": ["users"], "query": [{ "key": "page", "value": "99999" }, { "key": "per_page", "value": "10" }] },
            "description": "High page yields empty array on GoREST. Alternatively use status=NonExistentStatus."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-LIST-005: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Body is empty array', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array').and.to.have.lengthOf(0);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get List Respects Query Filters",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": { "raw": "{{base_url}}/users?status=active", "host": ["{{base_url}}"], "path": ["users"], "query": [{ "key": "status", "value": "active" }] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-LIST-006: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('All items match filter', function () {",
                  "    const json = pm.response.json();",
                  "    json.forEach(function(item) { pm.expect(item.status).to.eql('active'); });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get List Without Auth Returns 401",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json", "type": "text" }],
            "body": { "mode": "raw", "raw": "{}" },
            "url": "{{base_url}}/users",
            "description": "No auth - POST requires auth for GoREST"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-LIST-007: Status is 401', function () { pm.response.to.have.status(401); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get List With Valid Auth Returns 200",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Accept", "value": "application/json", "type": "text" }
            ],
            "url": "{{base_url}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-LIST-008: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response has array', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "GET-Single",
      "item": [
        {
          "name": "Setup: Get Valid user_id",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users?per_page=1",
            "description": "Fetches first user for GET-Single tests. Required when run in isolation."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Setup: Got user list', function () { pm.expect(pm.response.code).to.equal(200); });",
                  "const json = pm.response.json(); if (json && json.length > 0) pm.collectionVariables.set('user_id', json[0].id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get By Valid ID Returns 200",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-SINGLE-001: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Body is single resource', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.be.an('object');",
                  "    pm.expect(json).to.have.property('id');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Returns Expected Fields and Types",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-SINGLE-002: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response has expected fields', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('id').that.is.a('number');",
                  "    pm.expect(json).to.have.property('name').that.is.a('string');",
                  "    pm.expect(json).to.have.property('email').that.is.a('string');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Non-Existent ID Returns 404",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users/999999999"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-SINGLE-003: Status is 404', function () { pm.response.to.have.status(404); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Invalid ID Format Returns 400/404",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users/invalid"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-SINGLE-004: Status is 400 or 404', function () {",
                  "    pm.expect([400, 404]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Without Auth Returns 401",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json", "type": "text" }],
            "body": { "mode": "raw", "raw": "{\"name\":\"x\",\"email\":\"x@x.com\",\"gender\":\"male\",\"status\":\"active\"}" },
            "url": "{{base_url}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-SINGLE-005: Status is 401', function () { pm.response.to.have.status(401); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get With Valid Auth Returns 200",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Accept", "value": "application/json", "type": "text" }
            ],
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-GET-SINGLE-006: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Body contains resource', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('id');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "POST-Create",
      "item": [
        {
          "name": "Post Valid Body Returns 201",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Post Test User\",\n  \"email\": \"post-{{$timestamp}}@example.com\",\n  \"gender\": \"male\",\n  \"status\": \"active\"\n}"
            },
            "url": "{{base_url}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-POST-001: Status is 201', function () { pm.response.to.have.status(201); });",
                  "if (pm.response.headers.has('Location')) {",
                  "    pm.test('Location header present', function () {",
                  "        pm.expect(pm.response.headers.get('Location')).to.be.a('string');",
                  "    });",
                  "}",
                  "const json = pm.response.json();",
                  "if (json && json.id) pm.collectionVariables.set('user_id', json.id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Post Returns Created Resource",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Created Resource Test\",\n  \"email\": \"created-{{$timestamp}}@example.com\",\n  \"gender\": \"female\",\n  \"status\": \"active\"\n}"
            },
            "url": "{{base_url}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-POST-002: Status is 201', function () { pm.response.to.have.status(201); });",
                  "pm.test('Response contains created resource', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('id');",
                  "    pm.expect(json).to.have.property('name');",
                  "    pm.expect(json).to.have.property('email');",
                  "});",
                  "const json = pm.response.json();",
                  "if (json && json.id) pm.collectionVariables.set('user_id', json.id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Post Missing Required Field Returns 400",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"missing-name@example.com\",\n  \"gender\": \"male\",\n  \"status\": \"active\"\n}"
            },
            "url": "{{base_url}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-POST-003: Status is 400 or 422', function () {",
                  "    pm.expect([400, 422]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Post Invalid Field Format Returns 400",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test\",\n  \"email\": \"not-an-email\",\n  \"gender\": \"male\",\n  \"status\": \"active\"\n}"
            },
            "url": "{{base_url}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-POST-004: Status is 400 or 422', function () {",
                  "    pm.expect([400, 422]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Post Empty Body Returns 400/415",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": { "mode": "raw", "raw": "{}" },
            "url": "{{base_url}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-POST-005: Status is 400, 415 or 422', function () {",
                  "    pm.expect([400, 415, 422]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Post Wrong Content-Type Returns 415/400",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "text/plain", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Test\",\"email\":\"test@example.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-POST-006: Status is 415, 400 or 422', function () {",
                  "    pm.expect([415, 400, 422]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Post Without Auth Returns 401",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json", "type": "text" }],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Test\",\"email\":\"test@example.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-POST-007: Status is 401', function () { pm.response.to.have.status(401); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Post With Valid Auth Creates Resource",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Auth Create Test\",\n  \"email\": \"auth-{{$timestamp}}@example.com\",\n  \"gender\": \"male\",\n  \"status\": \"active\"\n}"
            },
            "url": "{{base_url}}/users"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-POST-008: Status is 201', function () { pm.response.to.have.status(201); });",
                  "pm.test('Resource created', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('id');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Post Duplicate Returns 409/400",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Duplicate Test\",\n  \"email\": \"duplicate-test@example.com\",\n  \"gender\": \"male\",\n  \"status\": \"active\"\n}"
            },
            "url": "{{base_url}}/users",
            "description": "Run twice - second run expects 409/400"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-POST-009: Status is 201, 409, 400 or 422', function () {",
                  "    pm.expect([201, 409, 400, 422]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "PUT-Update",
      "item": [
        {
          "name": "Setup: Create User for PUT",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Put Test User\",\"email\":\"put-setup-{{$timestamp}}@example.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users",
            "description": "Creates user for PUT tests. GoREST: can only PUT users you create."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Setup: Create succeeded', function () { pm.expect(pm.response.code).to.be.oneOf([200, 201]); });",
                  "const json = pm.response.json(); if (json && json.id) pm.collectionVariables.set('user_id', json.id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Put Valid Body Returns 200",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\",\n  \"email\": \"updated-{{$timestamp}}@example.com\",\n  \"gender\": \"male\",\n  \"status\": \"inactive\"\n}"
            },
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PUT-001: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response contains updated resource', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('name', 'Updated Name');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Put Response Contains Updated Fields",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"ExactMatch\",\n  \"email\": \"exact-{{$timestamp}}@example.com\",\n  \"gender\": \"female\",\n  \"status\": \"active\"\n}"
            },
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PUT-002: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response matches sent data', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.name).to.eql('ExactMatch');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Put Non-Existent ID Returns 404",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"X\",\"email\":\"x@x.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users/999999999"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PUT-003: Status is 404', function () { pm.response.to.have.status(404); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Put Invalid ID Format",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"X\",\"email\":\"x@x.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users/invalid"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PUT-004: Status is 400 or 404', function () {",
                  "    pm.expect([400, 404]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Put Missing Required Fields Returns 400",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": { "mode": "raw", "raw": "{\"name\":\"OnlyName\"}" },
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PUT-005: Status is 400, 422, 200 or 404', function () {",
                  "    pm.expect([400, 422, 200, 404]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Put Invalid Field Values Returns 400",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"X\",\"email\":\"x@x.com\",\"gender\":\"invalid\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PUT-006: Status is 400, 422 or 404', function () {",
                  "    pm.expect([400, 422, 404]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Put Without Auth Returns 401",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json", "type": "text" }],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"X\",\"email\":\"x@x.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PUT-007: Status is 401 or 404', function () { pm.expect([401, 404]).to.include(pm.response.code); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Put With Valid Auth Updates Resource",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Auth Update Test\",\n  \"email\": \"auth-update-{{$timestamp}}@example.com\",\n  \"gender\": \"female\",\n  \"status\": \"active\"\n}"
            },
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PUT-008: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Resource updated', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('id');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "PATCH-Update",
      "item": [
        {
          "name": "Setup: Create User for PATCH",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Patch Test User\",\"email\":\"patch-setup-{{$timestamp}}@example.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users",
            "description": "Creates user for PATCH tests. GoREST: can only PATCH users you create."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Setup: Create succeeded', function () { pm.expect(pm.response.code).to.be.oneOf([200, 201]); });",
                  "const json = pm.response.json(); if (json && json.id) pm.collectionVariables.set('user_id', json.id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Patch Valid Partial Body Returns 200",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": { "mode": "raw", "raw": "{\"status\":\"inactive\"}" },
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PATCH-001: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Updated field reflected', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.status).to.eql('inactive');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Patch Updates Only Sent Fields",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": { "mode": "raw", "raw": "{\"status\":\"active\"}" },
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PATCH-002: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Only sent field updated', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('status');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Patch Non-Existent ID Returns 404",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": { "mode": "raw", "raw": "{\"status\":\"inactive\"}" },
            "url": "{{base_url}}/users/999999999"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PATCH-003: Status is 404', function () { pm.response.to.have.status(404); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Patch Invalid Field Value Returns 400",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": { "mode": "raw", "raw": "{\"status\":\"invalid_status\"}" },
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PATCH-004: Status is 400, 422 or 404', function () {",
                  "    pm.expect([400, 422, 404]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Patch Empty Body Returns 400 or 200",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": { "mode": "raw", "raw": "{}" },
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PATCH-005: Status is 400, 200 or 404', function () {",
                  "    pm.expect([400, 200, 404]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Patch Without Auth Returns 401",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json", "type": "text" }],
            "body": { "mode": "raw", "raw": "{\"status\":\"inactive\"}" },
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PATCH-006: Status is 401 or 404', function () { pm.expect([401, 404]).to.include(pm.response.code); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Patch With Valid Auth Updates Resource",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": { "mode": "raw", "raw": "{\"name\":\"Patched Name\"}" },
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-PATCH-007: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Resource updated', function () {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json).to.have.property('id');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "DELETE",
      "item": [
        {
          "name": "Setup: Create User for DELETE",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Delete Test User\",\"email\":\"delete-setup-{{$timestamp}}@example.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users",
            "description": "Creates user for DELETE tests. Sets user_id for 001, 004."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Setup: Create succeeded', function () { pm.expect(pm.response.code).to.be.oneOf([200, 201]); });",
                  "const json = pm.response.json(); if (json && json.id) pm.collectionVariables.set('user_id', json.id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Delete Valid ID Returns 204/200",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" }],
            "url": "{{base_url}}/users/{{user_id}}",
            "description": "Deletes user created in Setup. GoREST returns 204."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-DELETE-001: Status is 204 or 200', function () {",
                  "    pm.expect([204, 200]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get After Delete Returns 404",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users/{{user_id}}",
            "description": "GET same ID after delete - must return 404."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-DELETE-004: GET after DELETE returns 404', function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Delete Without Auth Returns 401",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": "{{base_url}}/users/1",
            "description": "No auth - expects 401. Fixed ID (resource existence irrelevant)."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-DELETE-005: Status is 401 or 404', function () { pm.expect([401, 404]).to.include(pm.response.code); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Delete Non-Existent ID Returns 404",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" }],
            "url": "{{base_url}}/users/999999999"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-DELETE-002: Status is 404', function () { pm.response.to.have.status(404); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Delete Invalid ID Format",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" }],
            "url": "{{base_url}}/users/invalid"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-DELETE-003: Status is 400 or 404', function () {",
                  "    pm.expect([400, 404]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Setup: Create User for DELETE 006",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" },
              { "key": "Content-Type", "value": "application/json", "type": "text" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Delete Auth Test\",\"email\":\"delete-auth-{{$timestamp}}@example.com\",\"gender\":\"male\",\"status\":\"active\"}"
            },
            "url": "{{base_url}}/users",
            "description": "Creates user for API-DELETE-006 (Delete With Valid Auth)."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Setup: Create succeeded', function () { pm.expect(pm.response.code).to.be.oneOf([200, 201]); });",
                  "const json = pm.response.json(); if (json && json.id) pm.collectionVariables.set('user_id', json.id);"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Delete With Valid Auth Removes Resource",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" }],
            "url": "{{base_url}}/users/{{user_id}}"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-DELETE-006: Status is 204 or 200', function () {",
                  "    pm.expect([204, 200]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Delete With Conflict Returns 409",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}", "type": "text" }],
            "url": "{{base_url}}/users/{{user_id}}",
            "description": "GoREST: deleting already-deleted returns 404. APIs with conflict rules return 409."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-DELETE-007: Status is 409, 404, 204 or 200', function () {",
                  "    pm.expect([409, 404, 204, 200]).to.include(pm.response.code);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Headers",
      "item": [
        {
          "name": "Accept application/json Receives JSON",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users?per_page=1"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-HEADERS-001: Content-Type is application/json', function () {",
                  "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('Response is valid JSON', function () { pm.response.json(); });"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Response Includes Content-Type",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users?per_page=1",
            "description": "GET list returns 200 with JSON. GoREST 404 also has Content-Type."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-HEADERS-002: Content-Type includes application/json', function () {",
                  "    const ct = pm.response.headers.get('Content-Type');",
                  "    pm.expect(ct).to.include('application/json');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "No Sensitive Headers Exposed",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users?per_page=1"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-HEADERS-003: No X-Powered-By header', function () {",
                  "    pm.expect(pm.response.headers.has('X-Powered-By')).to.be.false;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Error-Responses",
      "item": [
        {
          "name": "4xx Includes Error Message",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users/999999999"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-ERROR-001: Status is 4xx', function () {",
                  "    pm.expect(pm.response.code).to.be.within(400, 499);",
                  "});",
                  "if (pm.response.code >= 400 && pm.response.code < 500) {",
                  "    pm.test('Body contains error info', function () {",
                  "        const body = pm.response.json();",
                  "        pm.expect(JSON.stringify(body)).to.match(/message|error|code|validation/i);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "5xx Handled Without Crashing",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users/1",
            "description": "5xx hard to trigger - test validates client handles any status"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-ERROR-002: Client handles response', function () {",
                  "    pm.expect(pm.response.code).to.be.within(200, 599);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Response Time Within Timeout",
          "request": {
            "method": "GET",
            "header": [{ "key": "Accept", "value": "application/json", "type": "text" }],
            "url": "{{base_url}}/users?per_page=1"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API-ERROR-003: Status is 200', function () { pm.response.to.have.status(200); });",
                  "pm.test('Response time within 5000 ms', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(5000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    }
  ]
}
